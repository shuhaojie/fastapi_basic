2025-11-22 21:31:47,610 - INFO - ğŸš€ Application startup
2025-11-22 21:37:03,506 - INFO - ğŸ›‘ Application shutdown
2025-11-22 21:37:03,949 - INFO - Application startup
2025-11-22 21:37:07,595 - INFO - ğŸ›‘ Application shutdown
2025-11-22 21:37:07,916 - INFO - Application startup
2025-11-22 21:39:34,234 - INFO - Application shutdown
2025-11-22 21:39:34,583 - INFO - Application startup
2025-11-22 21:39:44,505 - INFO - Application shutdown
2025-11-22 21:39:44,852 - INFO - Application startup
2025-11-22 21:39:52,736 - INFO - Application shutdown
2025-11-22 21:39:53,074 - INFO - Application startup
2025-11-22 21:40:48,961 - INFO - Application shutdown
2025-11-22 21:40:49,378 - INFO - Application startup
2025-11-22 21:40:56,350 - INFO - Application shutdown
2025-11-22 21:40:56,900 - INFO - Application startup
2025-11-22 21:43:15,172 - INFO - Application shutdown
2025-11-22 21:43:15,657 - INFO - Application startup
2025-11-22 21:44:50,723 - INFO - current_path:/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic
2025-11-22 21:46:15,279 - INFO - Application shutdown
2025-11-22 21:46:15,836 - INFO - Application startup
2025-11-22 21:46:18,136 - INFO - current_path:/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic
2025-11-22 21:46:32,511 - INFO - current_path:/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic
2025-11-22 21:49:38,105 - INFO - Application shutdown
2025-11-22 22:42:25,874 - INFO - Application startup
2025-11-22 22:43:30,569 - INFO - verification_code:166567
2025-11-22 22:44:37,135 - INFO - Application shutdown
2025-11-22 22:44:37,725 - INFO - Application startup
2025-11-22 22:45:33,822 - INFO - Application shutdown
2025-11-22 22:45:34,390 - INFO - Application startup
2025-11-22 22:45:56,825 - INFO - Application shutdown
2025-11-22 22:45:57,354 - INFO - Application startup
2025-11-22 22:46:16,454 - INFO - Application shutdown
2025-11-22 22:46:17,076 - INFO - Application startup
2025-11-22 22:46:19,501 - INFO - Application shutdown
2025-11-22 22:46:19,962 - INFO - Application startup
2025-11-22 22:46:22,389 - INFO - Application shutdown
2025-11-22 22:46:22,865 - INFO - Application startup
2025-11-22 22:46:30,037 - INFO - verification_code:689692
2025-11-22 22:46:31,531 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-22 22:46:31,537 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 22:47:17,446 - INFO - Application shutdown
2025-11-22 22:47:18,068 - INFO - Application startup
2025-11-22 22:47:37,463 - INFO - Application shutdown
2025-11-22 22:47:59,185 - INFO - Application startup
2025-11-22 22:51:02,495 - INFO - Application shutdown
2025-11-22 22:51:03,082 - INFO - Application startup
2025-11-22 22:52:33,942 - INFO - Application shutdown
2025-11-22 22:52:34,512 - INFO - Application startup
2025-11-22 22:52:40,788 - INFO - Application shutdown
2025-11-22 22:52:41,189 - INFO - Application startup
2025-11-22 22:52:46,140 - INFO - Application shutdown
2025-11-22 22:52:46,567 - INFO - Application startup
2025-11-22 22:53:33,761 - INFO - Application shutdown
2025-11-22 22:53:34,286 - INFO - Application startup
2025-11-22 22:53:52,273 - INFO - Application shutdown
2025-11-22 22:53:52,690 - INFO - Application startup
2025-11-22 22:54:14,019 - INFO - Application shutdown
2025-11-22 22:54:14,601 - INFO - Application startup
2025-11-22 22:54:19,852 - INFO - Application shutdown
2025-11-22 22:54:20,373 - INFO - Application startup
2025-11-22 22:54:20,676 - INFO - Application shutdown
2025-11-22 22:54:22,512 - INFO - Application startup
2025-11-22 22:56:06,110 - INFO - Application shutdown
2025-11-22 22:56:06,548 - INFO - Application startup
2025-11-22 22:57:31,003 - INFO - verification_code:996221
2025-11-22 22:57:31,003 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: 1 validation error for MessageSchema
recipients
  Input should be a valid list [type=list_type, input_value=NameEmail(name='shuhaojie...ail='shuhaojie@sina.cn'), input_type=NameEmail]
    For further information visit https://errors.pydantic.dev/2.12/v/list_type
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 28, in send_verification_email
    message = MessageSchema(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for MessageSchema
recipients
  Input should be a valid list [type=list_type, input_value=NameEmail(name='shuhaojie...ail='shuhaojie@sina.cn'), input_type=NameEmail]
    For further information visit https://errors.pydantic.dev/2.12/v/list_type
2025-11-22 22:57:31,005 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 22:58:08,723 - INFO - Application shutdown
2025-11-22 22:58:09,144 - INFO - Application startup
2025-11-22 22:58:31,660 - INFO - verification_code:775939
2025-11-22 22:58:31,661 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: 1 validation error for MessageSchema
recipients
  Input should be a valid list [type=list_type, input_value=NameEmail(name='shuhaojie...ail='shuhaojie@sina.cn'), input_type=NameEmail]
    For further information visit https://errors.pydantic.dev/2.12/v/list_type
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 28, in send_verification_email
    message = MessageSchema(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for MessageSchema
recipients
  Input should be a valid list [type=list_type, input_value=NameEmail(name='shuhaojie...ail='shuhaojie@sina.cn'), input_type=NameEmail]
    For further information visit https://errors.pydantic.dev/2.12/v/list_type
2025-11-22 22:58:31,662 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:00:20,986 - INFO - Application shutdown
2025-11-22 23:00:21,444 - INFO - Application startup
2025-11-22 23:00:22,353 - INFO - Application shutdown
2025-11-22 23:00:24,140 - INFO - Application startup
2025-11-22 23:00:34,737 - INFO - verification_code:234104
2025-11-22 23:00:35,830 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-22 23:00:35,837 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:04:46,600 - INFO - Application shutdown
2025-11-22 23:04:47,163 - INFO - Application startup
2025-11-22 23:05:16,175 - INFO - Application shutdown
2025-11-22 23:05:16,772 - INFO - Application startup
2025-11-22 23:05:29,100 - INFO - Application shutdown
2025-11-22 23:05:30,593 - INFO - Application startup
2025-11-22 23:05:34,034 - INFO - verification_code:920559
2025-11-22 23:05:34,035 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: 1 validation error for MessageSchema
recipients.0
  Input is not a valid NameEmail [type=name_email_type, input_value=('email', [NameEmail(name...l='shuhaojie@sina.cn')]), input_type=tuple]
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 28, in send_verification_email
    message = MessageSchema(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for MessageSchema
recipients.0
  Input is not a valid NameEmail [type=name_email_type, input_value=('email', [NameEmail(name...l='shuhaojie@sina.cn')]), input_type=tuple]
2025-11-22 23:05:34,037 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:06:31,825 - INFO - Application shutdown
2025-11-22 23:06:33,923 - INFO - Application startup
2025-11-22 23:06:35,567 - INFO - verification_code:859443
2025-11-22 23:06:35,569 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: 1 validation error for ConnectionConfig
MAIL_STARTTLS
  Field required [type=missing, input_value={'MAIL_USERNAME': '238667... 'VALIDATE_CERTS': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 33, in send_verification_email
    conf = self.get_mail_config()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 45, in get_mail_config
    mail_conf = ConnectionConfig(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/pydantic_settings/main.py", line 176, in __init__
    super().__init__(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for ConnectionConfig
MAIL_STARTTLS
  Field required [type=missing, input_value={'MAIL_USERNAME': '238667... 'VALIDATE_CERTS': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-11-22 23:06:35,572 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:06:53,626 - INFO - Application shutdown
2025-11-22 23:06:54,045 - INFO - Application startup
2025-11-22 23:06:55,864 - INFO - Application shutdown
2025-11-22 23:06:57,429 - INFO - Application startup
2025-11-22 23:06:59,356 - INFO - verification_code:857521
2025-11-22 23:07:00,406 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-22 23:07:00,413 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:08:35,179 - INFO - Application shutdown
2025-11-22 23:08:35,637 - INFO - Application startup
2025-11-22 23:08:36,647 - INFO - Application shutdown
2025-11-22 23:08:38,050 - INFO - Application startup
2025-11-22 23:08:41,461 - INFO - verification_code:609416
2025-11-22 23:08:41,842 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: Server not connected
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 153, in send_message
    await session.session.send_message(msg)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 1470, in send_message
    return await self.sendmail(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 1354, in sendmail
    raise exc
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 1336, in sendmail
    await self.mail(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 853, in mail
    raise SMTPSenderRefused(response.code, response.message, sender)
aiosmtplib.errors.SMTPSenderRefused: (503, 'Error: need EHLO and AUTH first !', '2386677465@qq.com')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 569, in execute_command
    raise SMTPServerDisconnected("Server not connected")
aiosmtplib.errors.SMTPServerDisconnected: Server not connected
2025-11-22 23:08:41,846 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-22 23:09:15,928 - INFO - Application shutdown
2025-11-22 23:09:16,475 - INFO - Application startup
2025-11-22 23:09:35,678 - INFO - Application shutdown
2025-11-22 23:09:36,086 - INFO - Application startup
2025-11-22 23:09:52,865 - INFO - Application shutdown
2025-11-22 23:09:53,389 - INFO - Application startup
2025-11-22 23:10:05,616 - INFO - Application shutdown
2025-11-22 23:10:06,146 - INFO - Application startup
2025-11-22 23:10:12,919 - INFO - Application shutdown
2025-11-22 23:10:13,417 - INFO - Application startup
2025-11-22 23:10:13,720 - INFO - Application shutdown
2025-11-22 23:10:15,527 - INFO - Application startup
2025-11-22 23:10:19,811 - INFO - verification_code:643218
2025-11-22 23:10:20,923 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-22 23:10:20,931 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 07:59:00,616 - INFO - Application shutdown
2025-11-23 07:59:01,214 - INFO - Application startup
2025-11-23 07:59:28,197 - INFO - Application shutdown
2025-11-23 07:59:28,726 - INFO - Application startup
2025-11-23 07:59:48,015 - INFO - Application shutdown
2025-11-23 08:01:00,344 - INFO - Application startup
2025-11-23 08:01:03,847 - INFO - verification_code:024540
2025-11-23 08:01:05,090 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: Exception raised Error connecting to smtp.qq.com on port 587: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:997), check your credentials or email service configuration
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 503, in _create_connection
    transport, _ = await asyncio.wait_for(connect_coro, timeout=timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "uvloop/loop.pyx", line 2088, in create_connection
  File "uvloop/loop.pyx", line 2083, in uvloop.loop.Loop.create_connection
  File "uvloop/sslproto.pyx", line 517, in uvloop.loop.SSLProtocol._on_handshake_complete
  File "uvloop/sslproto.pyx", line 499, in uvloop.loop.SSLProtocol._do_handshake
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/ssl.py", line 975, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:997)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 47, in _configure_connection
    await self.session.connect()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 453, in connect
    raise exc
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 446, in connect
    response = await self._create_connection(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 509, in _create_connection
    raise SMTPConnectError(
aiosmtplib.errors.SMTPConnectError: Error connecting to smtp.qq.com on port 587: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:997)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 23, in __aenter__
    await self._configure_connection()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 56, in _configure_connection
    raise ConnectionErrors(
fastapi_mail.errors.ConnectionErrors: Exception raised Error connecting to smtp.qq.com on port 587: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:997), check your credentials or email service configuration
2025-11-23 08:01:05,095 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:01:20,564 - INFO - Application shutdown
2025-11-23 08:01:22,600 - INFO - Application startup
2025-11-23 08:01:26,002 - INFO - verification_code:622855
2025-11-23 08:01:27,225 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-23 08:01:27,231 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:04:00,240 - INFO - Application shutdown
2025-11-23 08:04:04,906 - INFO - Application startup
2025-11-23 08:04:27,237 - INFO - Application shutdown
2025-11-23 08:06:44,206 - INFO - Application startup
2025-11-23 08:06:51,854 - INFO - verification_code:247962
2025-11-23 08:06:52,983 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-23 08:06:52,989 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:08:08,017 - INFO - Application shutdown
2025-11-23 08:08:08,662 - INFO - Application startup
2025-11-23 08:08:12,707 - INFO - Application shutdown
2025-11-23 08:08:13,129 - INFO - Application startup
2025-11-23 08:08:22,124 - INFO - Application shutdown
2025-11-23 08:08:22,573 - INFO - Application startup
2025-11-23 08:08:29,445 - INFO - Application shutdown
2025-11-23 08:08:29,917 - INFO - Application startup
2025-11-23 08:08:31,436 - INFO - Application shutdown
2025-11-23 08:08:33,711 - INFO - Application startup
2025-11-23 08:08:35,992 - INFO - verification_code:017411
2025-11-23 08:08:37,729 - ERROR - å‘é€éªŒè¯ç é‚®ä»¶å¤±è´¥: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
Traceback (most recent call last):
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/src/features/auth/utils.py", line 35, in send_verification_email
    await fm.send_message(message)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/fastmail.py", line 151, in send_message
    async with Connection(self.config) as session:
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/fastapi_mail/connection.py", line 31, in __aexit__
    await self.session.quit()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 816, in quit
    response = await self.execute_command(b"QUIT", timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/smtp.py", line 572, in execute_command
    response = await self.protocol.execute_command(
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 301, in execute_command
    response = await self.read_response(timeout=timeout)
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 260, in read_response
    result = await asyncio.wait_for(self._response_waiter, timeout)
  File "/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/asyncio/tasks.py", line 445, in wait_for
    return fut.result()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 169, in data_received
    response = self._read_response_from_buffer()
  File "/Users/luoan/Documents/personal/é¡¹ç›®ä»£ç /fastapi_basic/venv/lib/python3.10/site-packages/aiosmtplib/protocol.py", line 222, in _read_response_from_buffer
    raise SMTPResponseException(
aiosmtplib.errors.SMTPResponseException: (-1, 'Malformed SMTP response line: \x00\x00\x00\x1a\x00\x00\x00\n')
2025-11-23 08:08:37,735 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:10:29,117 - INFO - Application shutdown
2025-11-23 08:12:44,708 - INFO - Application startup
2025-11-23 08:12:48,445 - INFO - verification_code:603573
2025-11-23 08:14:01,436 - INFO - Application shutdown
2025-11-23 08:14:02,771 - INFO - Application startup
2025-11-23 08:14:11,257 - INFO - verification_code:820154
2025-11-23 08:15:22,842 - INFO - Application shutdown
2025-11-23 08:18:26,395 - INFO - Application startup
2025-11-23 08:18:38,661 - INFO - verification_code:421883
2025-11-23 08:18:38,661 - INFO - email='shuhaojie@sina.cn'
2025-11-23 08:18:38,662 - INFO - 421883
2025-11-23 08:20:00,385 - INFO - Application shutdown
2025-11-23 08:20:00,846 - INFO - Application startup
2025-11-23 08:20:01,653 - INFO - Application shutdown
2025-11-23 08:20:02,065 - INFO - Application startup
2025-11-23 08:20:07,116 - INFO - Application shutdown
2025-11-23 08:20:10,560 - INFO - Application startup
2025-11-23 08:20:12,273 - INFO - verification_code:654813
2025-11-23 08:20:12,274 - INFO - <class 'src.features.auth.schema.EmailSchema'>
2025-11-23 08:20:25,276 - INFO - email='shuhaojie@sina.cn'
2025-11-23 08:20:43,340 - INFO - 654813
2025-11-23 08:22:16,435 - INFO - Application shutdown
2025-11-23 08:22:17,498 - INFO - Application startup
2025-11-23 08:23:34,286 - INFO - Application shutdown
2025-11-23 08:23:36,439 - INFO - Application startup
2025-11-23 08:23:40,162 - INFO - verification_code:913204
2025-11-23 08:23:40,162 - INFO - <class 'str'>
2025-11-23 08:23:40,162 - INFO - shuhaojie@sina.cn
2025-11-23 08:23:40,162 - INFO - 913204
2025-11-23 08:23:41,210 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:24:47,890 - INFO - Application shutdown
2025-11-23 08:24:48,429 - INFO - Application startup
2025-11-23 08:25:35,836 - INFO - Application shutdown
2025-11-23 08:25:36,416 - INFO - Application startup
2025-11-23 08:27:37,203 - INFO - Application shutdown
2025-11-23 08:27:37,796 - INFO - Application startup
2025-11-23 08:27:51,736 - INFO - Application shutdown
2025-11-23 08:29:31,918 - INFO - Application startup
2025-11-23 08:31:00,643 - INFO - Application shutdown
2025-11-23 08:31:01,232 - INFO - Application startup
2025-11-23 08:31:03,453 - INFO - Application shutdown
2025-11-23 08:31:08,578 - INFO - Application startup
2025-11-23 08:31:13,936 - INFO - verification_code:644014
2025-11-23 08:31:15,003 - INFO - å‘é€é‚®ä»¶è¿”å›:{}
2025-11-23 08:31:15,003 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:31:55,176 - INFO - Application shutdown
2025-11-23 08:31:55,656 - INFO - Application startup
2025-11-23 08:32:21,319 - INFO - verification_code:997167
2025-11-23 08:32:22,396 - INFO - å‘é€é‚®ä»¶è¿”å›:{}, error:OK: queued as.
2025-11-23 08:32:22,396 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:34:40,405 - INFO - Application shutdown
2025-11-23 08:34:54,251 - INFO - Application startup
2025-11-23 08:35:16,595 - INFO - Application shutdown
2025-11-23 08:35:17,159 - INFO - Application startup
2025-11-23 08:35:17,905 - INFO - verification_code:858367
2025-11-23 08:35:18,978 - INFO - é‚®ä»¶å‘é€æˆåŠŸ: ({}, 'OK: queued as.')
2025-11-23 08:35:18,978 - INFO - å‘é€é‚®ä»¶, å¤±è´¥
2025-11-23 08:35:44,043 - INFO - Application shutdown
2025-11-23 08:35:44,576 - INFO - Application startup
2025-11-23 08:35:45,893 - INFO - verification_code:060682
2025-11-23 08:35:46,954 - INFO - é‚®ä»¶å‘é€æˆåŠŸ: ({}, 'OK: queued as.')
2025-11-23 08:35:46,955 - INFO - å‘é€é‚®ä»¶, æˆåŠŸ
2025-11-23 08:36:06,909 - INFO - Application shutdown
2025-11-23 08:36:07,400 - INFO - Application startup
2025-11-23 08:37:35,337 - INFO - Application shutdown
2025-11-23 08:37:35,976 - INFO - Application startup
2025-11-23 08:37:51,130 - INFO - Application shutdown
2025-11-23 08:37:51,564 - INFO - Application startup
2025-11-23 08:40:47,967 - INFO - Application shutdown
2025-11-23 08:41:39,031 - INFO - Application startup
